
<mat-toolbar class="fixed top-0 left-0 right-0 z-50 shadow-md"
             style="background-color: rgb(51, 152, 51); padding: 10px;">
  <button mat-icon-button class="ml-2" (click)="sidenav.toggle()">
    <mat-icon class="text-white">menu</mat-icon>
  </button>
  <span class="flex-1"></span>
  <button mat-button class="!text-white" [matMenuTriggerFor]="menuNotification">
    Djouma
    <mat-icon class="text-white">arrow_drop_down</mat-icon>
  </button>
  <button mat-icon-button (click)="sidenavProfile.toggle()">
    <mat-icon class="text-white">person</mat-icon>
  </button>
</mat-toolbar>

<!-- le menu quand on clic sur le bouton avec dropdown -->
<mat-menu #menuNotification="matMenu" xPosition="before" class="p-2">
  <button mat-menu-item>
    <mat-icon class="mr-2 mb-2">person</mat-icon>
    Profil
  </button>
  <mat-divider></mat-divider>

  <!-- notification plus badge -->
  <button mat-menu-item>
    <mat-icon class="mr-2 mb-2">notifications
    </mat-icon>
    Notifications
    <span class="ml-auto bg-red-500 text-white text-xs font-semibold px-2 py-0.5 rounded-full">
      3
    </span>
  </button>
  <mat-divider></mat-divider>

  <!-- decouvre les fonctionnalité de l'app -->
  <button mat-menu-item (click)="aide()">
    <mat-icon class="mr-2 mb-2">help</mat-icon>
    Aide &amp; Support
  </button>
  <mat-divider></mat-divider>

  <button mat-menu-item class="!bg-red-500">
    <mat-icon class="mr-2">logout</mat-icon>
    Deconnexion
  </button>
</mat-menu>

<!-- HEADER -->
<div class="p-4 mt-16 flex items-center">
  
</div>

<hr />

<mat-sidenav-container class="h-[calc(100vh-90px)] mt-2">

  <!-- SIDENAV RESPONSIVE -->
  <mat-sidenav #sidenav 
               [mode]="screenWidth < 768 ? 'over' : 'over'"
               [opened]="screenWidth >= 768"
               class="bg-white  w-64 h-full !rounded-none">

    <mat-nav-list>

      <span class="text-gray-500 text-sm font-semibold mb-2">Ndandandeh</span>
      <mat-divider class="mb-2"></mat-divider>

      <!-- Item simple avec icône -->
      <a mat-list-item class="hover:bg-gray-100 !rounded-none">
        <mat-icon class="mr-3">person</mat-icon>
        Utilisateur
      </a>

      <!-- Item accordéon avec sous-menus -->
      <mat-accordion multi="false">
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon class="mr-3">medication</mat-icon>
              Médicament
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-nav-list>
            <a mat-list-item href="" class="hover:bg-gray-100 rounded">
              Ajouter Médicament
            </a>
            <a mat-list-item href="" class="hover:bg-gray-100 rounded">
              Liste Médicaments
            </a>
          </mat-nav-list>
        </mat-expansion-panel>

        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon class="mr-3">category</mat-icon>
              Catégorie
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-nav-list>
            <a mat-list-item href="" class="hover:bg-gray-100 rounded">
              Ajouter Catégorie
            </a>
            <a mat-list-item href="" class="hover:bg-gray-100 rounded">
              Liste Catégories
            </a>
          </mat-nav-list>
        </mat-expansion-panel>

        <!-- traitement -->
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon class="mr-3">healing</mat-icon>
              Traitement
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-nav-list>
            <a mat-list-item href="" class="hover:bg-gray-100 rounded">
              Ajouter Traitement
            </a>
            <a mat-list-item href="" class="hover:bg-gray-100 rounded">
              Liste Traitements
            </a>
          </mat-nav-list>
        </mat-expansion-panel>




      </mat-accordion>

    </mat-nav-list>

  </mat-sidenav>


  

  <!-- sidenav pour profile a droite avec des parametres -->
  <mat-sidenav #sidenavProfile position="end"
               mode="over"
               class=" bg-slate-50 shadow-md w-64 !h-[calc(100vh-90px)] p-4 flex flex-col !rounded-none">

        <!-- image centrer -->
      <div class="flex flex-col items-center mb-4">
        <img src="assets/img/avatar2.png" alt="Avatar" class="w-24 h-24 rounded-full mb-2">
        <h2 class="text-md font-semibold">
          Mamadou Djouma Barry
        </h2>
        <p class=" text-sm text-red-500">Admin</p>
      </div>

      <mat-divider></mat-divider>
      <span class="flex-1"></span>


      <button mat-flat-button class="w-full !text-white !border-2 !border-green-500 !bg-green-600 mt-3 mb-3">
        Modifier le profil
        <mat-icon>edit</mat-icon>
      </button>

      <!-- changer le mot de passe -->
      <button mat-flat-button class="w-full !text-white !border-2 !border-green-500 !bg-green-600 mb-3">
        Changer le mot de passe
        <mat-icon>lock</mat-icon>
      </button>
      

      
      
  </mat-sidenav>

  <!-- MAIN CONTENT -->
  <mat-sidenav-content class="p-4 sm:p-6 overflow-y-auto border-l border-gray-200">
    <router-outlet></router-outlet>

  </mat-sidenav-content>

</mat-sidenav-container>

<!-- ===== BOUTON CHAT FIXE ===== -->
<div style="position: fixed; bottom: 1.5rem; right: 1.5rem; z-index: 9999;">
  <button mat-fab
          (click)="ouvrirChat()"
          class="text-white shadow-2xl"
          style="background-color: green;">
    <mat-icon>chat</mat-icon>
  </button>
</div>
